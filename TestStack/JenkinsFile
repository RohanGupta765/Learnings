pipeline{
	agent any
	stages{
		stage('Compile Stage')
		{	
		
			steps
			{
			withMaven(maven : 'M3')
			{	echo 'Hello, Maven'
                sh 'mvn --version'
				sh 'maven clean compile'}
			}
		}
		
		stage('Testing Stage')
		{
			steps
			{
			withMaven(maven : 'M3')
			{bat 'maven test'}
			}
		}
	  }			
	}
	
	echo 'Hello, Maven'
                sh 'mvn --version'
	